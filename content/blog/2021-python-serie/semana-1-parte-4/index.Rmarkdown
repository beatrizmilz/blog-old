---
title: "Estudando Python - Semana 1, Parte 4"
excerpt: "Este posts √© uma forma de documentar alguns aprendizados na minha trajet√≥ria estudando Python. Estou fazendo o curso de [Python para inova√ß√£o c√≠vica](https://escoladedados.org/courses/python-para-inovacao-civica/), oferecido pela [Escola de Dados](https://escoladedados.org/)."
draft: FALSE
author: "Beatriz Milz"
date: '2021-08-13'
categories: ["Portugues", "Python", "Estudo", "Reticulate"]
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(
  echo = TRUE,
  cache = TRUE,
  message = FALSE,
  warning = FALSE,
  fig.align = "center",
  comment = NA,
  python = reticulate::eng_python
)

library(magrittr)
```

## Introdu√ß√£o

Ol√°!

Esse post faz parte de uma s√©rie de posts, que tem como objetivo documentar alguns aprendizados na minha trajet√≥ria estudando Python. Estou fazendo o curso de [Python para inova√ß√£o c√≠vica](https://escoladedados.org/courses/python-para-inovacao-civica/), oferecido pela [Escola de Dados](https://escoladedados.org/). Eu j√° programo em R, portanto muitas das anota√ß√µes ser√£o feitas comparando como √© feito em R e em Python, assim acho que fica mais f√°cil para eu fazer as conex√µes conceituais e lembrar mais f√°cil depois.

Esse √© o quarto post da semana 1, ent√£o caso n√£o tenha lido os posts anteriores, [acesse esse link](https://beatrizmilz.com/blog/2021-python-serie/)!


## Pacotes 

Em R, podemos instalar pacotes e com isso ter dispon√≠vel muitas fun√ß√µes que expandem as possibilidades do R base. Em Python tamb√©m podemos instalar as bibliotecas (li em outros lugares tamb√©m chamar de m√≥dulos ou pacotes), atrav√©s do [`pip`](https://pypi.org/project/pip/), um instalador de pacotes para Python, que j√° est√° dispon√≠vel nas vers√µes mais recentes do Python ao instal√°-lo. Antes de comentar como instalar pacotes, tem outro conceito importante a ser citado: o de ambientes virtuais!

### Ambientes virtuais

Em R, quando queremos isolar os pacotes e suas respectivas vers√µes entre os projetos que estamos desenvolvendo, podemos utilizar o pacote  [`{renv}`](https://rstudio.github.io/renv/articles/renv.html) (apesar de n√£o ser t√£o comum de ser utilizado: eu mesma uso em apenas alguns projetos que desenvolvo, como por exemplo: a minha tese, projetos acad√™micos, etc).

Em Python, o uso dos ambientes virtuais parece ser bem mais comum. Eu ainda estou me ambientando com os ambientes virtuais em Python, mas algo que j√° percebi de diferente entre os ambientes virtuais de Python e o [`{renv}`](https://rstudio.github.io/renv/articles/renv.html) do R √© que o {renv} √© configurado vinculado ao projeto no RStudio (os `.RProj`); j√° em Python n√≥s podemos criar os ambientes virtuais no computador e eles n√£o parecem ser vinculados √† "projetos" como no RStudio, e sim √† um diret√≥rio (uma pasta no computador).

A fun√ß√£o `reticulate::conda_list()` retorna um data frame com o nome de ambientes dispon√≠veis para uso. No resultado abaixo, √© poss√≠vel ver que o nome do ambiente dispon√≠vel √© `r-reticulate`:

```{r}
# C√≥digo R
library(reticulate)

reticulate::conda_list()
```


Neste post, n√£o vou tratar sobre como criar ambientes virtuais pois √© algo que eu estou praticando bastante ü§£ e prefiro entender melhor antes de tratar disso em um post. Mas deixo aqui algumas refer√™ncias:

- [Documenta√ß√£o do Python](https://docs.python.org/3/tutorial/venv.html)

- [Documenta√ß√£o do pacote reticulate](https://rstudio.github.io/reticulate/articles/python_packages.html)



### Instalar e carregar pacotes

Para instalar pacotes em R, podemos usar a seguinte fun√ß√£o: 

```{r eval=FALSE, include=TRUE}
# C√≥digo R
install.packages("nome_do_pacote")
```

Para instalar pacotes em Python, algo que ficou confuso para mim inicialmente era se eu deveria executar os c√≥digos no terminal ou no pr√≥prio Phyton! No exemplo a seguir, apresento o c√≥digo onde consegui instalar o pacote [pandas](https://pandas.pydata.org/) no terminal: 



```{bash eval=FALSE, include=TRUE}
# c√≥digo em bash/terminal:
python3 -m pip install "pandas"
```


Refer√™ncia importante: [Documenta√ß√£o do Python - Instalando pacotes](https://packaging.python.org/tutorials/installing-packages/)


Outra forma para instalar pacotes em Python √© com o [reticulate](https://rstudio.github.io/reticulate/), que possui fun√ß√µes para que a gente instale pacotes sendo expl√≠citos em qual ambiente virtual esses pacotes devem ser instalados. Por exemplo, se queremos instalar o  [pandas](https://pandas.pydata.org/) no ambiente `r-reticulate`, podemos usar a fun√ß√£o `conda_install()`:

```{r eval=FALSE, include=TRUE}
# C√≥digo R
reticulate::conda_install("r-reticulate", "pandas")
```

E para verificar se o pacote est√° dispon√≠vel para uso, podemos usar a fun√ß√£o `py_module_available()`:

```{r}
# C√≥digo R
reticulate::py_module_available("pandas")
```

### Carregar pacotes

Em R e Python, n√£o basta apenas instalar um pacote para que fique totalmente dispon√≠vel para utilizar as suas fun√ß√µes: precisamos carregar os pacotes. Em R, utilizamos a fun√ß√£o:


```{r eval=FALSE, include=TRUE}
# C√≥digo R
library(nome_do_pacote)
```


Em Python, usamos o `import`:


```{python}
# C√≥digo Python
import glob
```

Para utilizar alguma fun√ß√£o do pacote, √© usado a sintaxe `nomedopacote.nomedafuncao()`. Por exemplo, para usar a fun√ß√£o `glob()` do pacote `glob`, usamos:

```{python}
# C√≥digo Python
glob.glob('dados/*.csv')
```

> Obs: N√£o √© necess√°rio focar no uso da fun√ß√£o acima agora, pois vou comentar em posts futuros!

Por√©m, algo que eu achei curioso √© que podemos usar abrevia√ß√µes para acessar alguns pacotes, como o pandas! Por exemplo:

```{python}
# C√≥digo Python
import pandas as pd
```

Para utilizar alguma fun√ß√£o do pacote, n√≥s precisamos usar a forma `nomedopacote.nomedafuncao()`, por exemplo, para usar a fun√ß√£o `glob()` do pacote `glob`, usamos:

```{python}
# C√≥digo Python

# Importando uma base com pd.read_csv()
pd.read_csv('dados/consulta_cand_2020_PE.csv', sep = ';', encoding = 'latin_1')
```


> Obs: N√£o √© necess√°rio focar no uso da fun√ß√£o acima agora, pois vou comentar em posts futuros!


Conhe√ßo pessoas que n√£o gostam muito dessa sintaxe usada em Python (por exemplo `pd.read_csv()`). Por√©m, quando estou programando em R, na maioria das vezes eu uso uma sintaxe que me permite n√£o carregar pacotes com `library()`, e tamb√©m diminuir a chance de conflitos de fun√ß√µes de pacotes diferentes mas que tem o mesmo nome de fun√ß√£o. Essa sintaxe utiliza os quatro pontos `::`, por exemplo: `nome_do_pacote::nome_da_funcao()`. Ent√£o usar o `pd.read_csv()` e `readr::read_csv()` n√£o √© t√£o diferente para mim! 



## Agradecimentos

Espero que esse post seja √∫til para pessoas que, assim como eu, j√° programam em R e querem aprender Python. Agrade√ßo muito √† equipe da [Escola de Dados](https://escoladedados.org/courses/python-para-inovacao-civica/), por oferecer esse curso. Al√©m disso, gostaria de agradecer especialmente √† instrutora da semana: [Ana Cec√≠lia Vieira](https://twitter.com/cecivieira).

## Como interagir?

Atualmente, n√£o est√° funcionando a op√ß√£o de coment√°rios. Ent√£o se quiser comentar/interagir, recomendo que fa√ßa nessa thread, onde estou falando sobre essa s√©rie de posts:

<center>
```{r tweet, echo=FALSE}
# devtools::install_github("gadenbuie/tweetrmd")
# devtools::install_github('rstudio/webshot2')
# tweet <- tweetrmd::tweet_screenshot("https://twitter.com/BeaMilz/status/1424188713974829056?s=20", file = "tweet.png")

library(tweetrmd)
tweet_embed("https://twitter.com/BeaMilz/status/1424188713974829056?s=20")
```

</center>
- [Veja a thread completa neste link!](https://twitter.com/BeaMilz/status/1424188713974829056?s=20)
